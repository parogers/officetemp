
function Demo()
{
}

Demo.prototype.preload = function() 
{
    //  You can fill the preloader with as many assets as your game requires

    //  Here we are loading an image. The first parameter is the unique
    //  string by which we'll identify the image later in our code.

    //  The second parameter is the URL of the image (relative)
    game.load.image('test', 'test.png');
    game.load.audio('hit', 'hit.wav');
}

Demo.prototype.create = function() 
{
    //  To make the sprite move we need to enable Arcade Physics
    game.physics.startSystem(Phaser.Physics.ARCADE);

    sprite = game.add.sprite(game.world.centerX, game.world.centerY, 'test');
    sprite.anchor.set(0.5);
    sprite.scale.set(10);

    let other = game.add.sprite(0, 0, 'test');
    other.anchor.set(0.5);
    other.position.set(10, 10);

    //sprite.addChild(other);

    controls = game.input.keyboard.createCursorKeys();
    spaceKey = game.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR);

    game.input.keyboard.addKeyCapture([spaceKey.keyCode]);

    //game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
    //game.scale.pageAlignHorizontally = true;
    //game.scale.pageAlignVertically = true;

    //  And enable the Sprite to have a physics body:
    game.physics.arcade.enable(sprite);
}

var velx = 0;
var vely = 0;
var accelx = 0;
var accely = 0;
var timer = 1;
Demo.prototype.update = function() 
{
    var dt = game.time.elapsedMS/1000.0;

    if (spaceKey.isDown) {
    }

    var dirx = controls.right.isDown - controls.left.isDown;
    var diry = controls.down.isDown - controls.up.isDown;

    accelx = dirx*1000;
    accely = diry*1000;

    velx += accelx*dt;
    vely += accely*dt;

    sprite.x += velx*dt;
    sprite.y += vely*dt;

/*    //  If the sprite is > 8px away from the pointer then let's move to it
    if (game.physics.arcade.distanceToPointer(sprite, game.input.activePointer) > 8)
    {
        //  Make the object seek to the active pointer (mouse or touch).
        game.physics.arcade.moveToPointer(sprite, 100);
    }
    else
    {
        //  Otherwise turn off velocity because we're close enough to the pointer
        sprite.body.velocity.set(0);

        if (timer < 0) {
            console.log("HIT");
            game.sound.play('hit');
            timer = 1;
        }
    }*/
}

Demo.prototype.render = function()
{
    //game.debug.inputInfo(32, 32);
}

module.exports = {
    Demo: Demo
};

